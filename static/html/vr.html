<!--pythonに頼らない「静的」ページとするため、このstatic/html/下に置く。-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ながら測定器</title>

  <!--⑤YouTubeAPI-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text/javascript">
    var tag = document.createElement("script")
    tag.src = "https://www.youtube.com/iframe_api"
    var firstScriptTag = document.getElementsByTagName("script")[0]
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)

    var ytArea = "video-background"
    var ytID = "URnVNudD_BU"
    var ytPlayer

    function onYouTubeIframeAPIReady(){
      ytPlayer = new YT.Player(ytArea, {
        videoID: ytID,
        playerVars: {
          rel: 0,
          controls: 0,
          loop: 1,
          autoplay: 1,
          showinfo: 0,
          modestbranding: 0,
          iv_load_policy:3,
          wmode: "transparent"
        },
        events: {
          "onReady": onPlayerReady,
          "onStateChange": onPlayerStateChange
        }
      })
    }

    function onPlayerReady(e){
      ytPlayer.playVideo()
      ytPlayer.mute()
      ytPlayer.setPlaybackQuality("default")
    }

    function onPlayerStateChange(e){
      var ytStatus = e.target.getPlayerState()
      if(ytStatus == YT.PlayerState.PLAYING){}
      if(ytStatus == YT.PlayerState.ENDED){
        ytPlayer.playVideo()
        ytPlayer.mute()
      }
    }

    var WIN = $(window)
    var WIN_H
    var WIN_W

    function yt_screen_ratio(){
      WIN_H = WIN.height()
      WIN_W = WIN.width()
      var screen_switch = 0.5625
      var screen_ratio = WIN_H/WIN_W
      var ratio_H = WIN_H/screen_switch
      var ratio_W = WIN_W*screen_switch

      if(screen_ratio>screen_switch){
        $("#video-background").css({
          "heigth":"100%",
          "width":ratio_H,
          "margin-top":"0",
          "margin-left":-ratio_H/2,
          "left":"50%",
          "top":"0"
        })
      }else{
        $("#video-background").css({
          "width":"100%",
          "height":ratio_W,
          "margin-top":-ratio_W/2,
          "margin-left":"0",
          "top":"50%",
          "left":"0"
        })
      }
    }

    WIN.resize(function(){
      yt_screen_ratio()
    })
    $(function(){
      yt_screen_ratio()
    })
  </script>
  <style type="text/css">
    /*⑤*/
    #video-background, #video-overlay{
        position: fixed;
        top: 0;
        left: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
    }
    #video-background{
        z-index: -2;
    }
    #video-background{
        z-index: -1;
    }
  </style>


  <link rel='stylesheet' href='/static/css/vr.css'><!--pythonに頼るPathではないため相対Pathが変わっていることに注意-->
  <!--②Aframe
  <script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>--><!--これ忘れてるぞ
  -->

  <!--①YouTubeにリダイレクト
  <script type="text/javascript">
    //location.href="https://youtube.com/embed/URnVNudD_BU?controls=0&playsinline=0&autoplay=1&loop=1&playlist=URnVNudD_BU"
  </script>
  -->

  <!--③CSSでズーム
  <style type="text/css">
    /*#vryt{zoom: 6;}*/
  </style>
  -->

  <script type="text/javascript" src="/static/js/sample.js"></script>
</head>
<body>
  <h1>あなたにおすすめの運動</h1>
  <!--<div class="VideoWrap">-->
    <!--③
    <iframe id="vryt" src="https://youtube.com/embed/URnVNudD_BU?controls=0&playsinline=0&autoplay=1&loop=1&playlist=URnVNudD_BU" importance="high"></iframe>
    -->

    <!--④HTMLでサイズ指定
    <iframe width="100%" height="1300px" src="https://www.youtube.com/embed/URnVNudD_BU?controls=0&playsinline=0&autoplay=1&loop=1&playlist=URnVNudD_BU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    -->
  
    <!--②ダメ
    <a-scene>
      <a-assets>
        <video class="BackVideo" id="video" autoplay loop="true" muted>
          <source type="video/mp4" src="/static/video/sample.mp4">
        </video>
        
      </a-assets>
      <a-videosphere src="#video"></a-videosphere>
    </a-scene>
    -->
  <!--</div>-->


  <!--⑤-->
  <div id="video-background"></div>
  <div id="video-overlay"></div>
</body>
</html>
