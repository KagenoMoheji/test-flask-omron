<!--pythonに頼らない「静的」ページとするため、このstatic/html/下に置く。-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ながら測定器</title>

  <!--⑤YouTubeAPI
  https://techmemo.biz/javascript/youtube-video-background/
  http://note.sorakakeru.info/?youtube-iframe-api
  https://developers.google.com/youtube/iframe_api_reference?hl=ja
  -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text/javascript">
    // IFrame Player API の読み込み
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// YouTubeの埋め込み
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('sample', {
            playerVars: {
                videoID: "URnVNudD_BU",
                controls: 0,
                autoplay: 1,
                loop: 1,
                modestbranding: 1,
                showinfo: 0,
                wmode: 'transparent'
            },
            events: {
                onReady: onPlayerReady
                //onStateChange: onPlayerStateChange
            }
    });
}

function onPlayerReady(event) {
    //event.target.playVideo();
    event.target.mute(); // 音声ミュート
}

// ブラウザサイズにあわせて全画面表示
function resizeMovie () {
    var $w = $(window),
    bw = 1200, //基準にする横幅
    bh = (bw/16) * 9, //基準にする高さ(16:9)
    w = $w.width(), //表示サイズ(幅)
    h = $w.height(), //表示サイズ(高さ)
    mw = w, //動画サイズ(幅)
    mh =  Math.round(bh * (mw/bw)); //動画サイズ(高さ)

    if ( mh < h ) { //動画の高さが表示サイズの高さより小さかったら
        mh = h; //表示サイズの高さに変更
        mw = Math.round(bw * (mh/bh)); //高さに合わせて横幅変更
    }

    $('#sample').css({
            width: mw,
            height: mh,
            marginTop: (h - mh)/2,
            marginLeft: (w - mw)/2
    });

}

resizeMovie();

$(window).resize(resizeMovie);
  </script>
  <style type="text/css">
    /*⑤*/
    #video-background, #video-overlay{
        position: fixed;
        top: 0;
        left: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
    }
    #video-background{
        z-index: -2;
    }
    #video-background{
        z-index: -1;
    }
  </style>


  <link rel='stylesheet' href='/static/css/vr.css'><!--pythonに頼るPathではないため相対Pathが変わっていることに注意-->
  <!--②Aframe
  <script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>--><!--これ忘れてるぞ
  -->

  <!--①YouTubeにリダイレクト
  <script type="text/javascript">
    //location.href="https://youtube.com/embed/URnVNudD_BU?controls=0&playsinline=0&autoplay=1&loop=1&playlist=URnVNudD_BU"
  </script>
  -->

  <!--③CSSでズーム
  <style type="text/css">
    /*#vryt{zoom: 6;}*/
  </style>
  -->

  <script type="text/javascript" src="/static/js/sample.js"></script>
</head>
<body>
  <h1>あなたにおすすめの運動</h1>
  <!--<div class="VideoWrap">-->
    <!--③
    <iframe id="vryt" src="https://youtube.com/embed/URnVNudD_BU?controls=0&playsinline=0&autoplay=1&loop=1&playlist=URnVNudD_BU" importance="high"></iframe>
    -->

    <!--④HTMLでサイズ指定
    <iframe width="100%" height="1300px" src="https://www.youtube.com/embed/URnVNudD_BU?controls=0&playsinline=0&autoplay=1&loop=1&playlist=URnVNudD_BU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    -->
  
    <!--②ダメ
    <a-scene>
      <a-assets>
        <video class="BackVideo" id="video" autoplay loop="true" muted>
          <source type="video/mp4" src="/static/video/sample.mp4">
        </video>
        
      </a-assets>
      <a-videosphere src="#video"></a-videosphere>
    </a-scene>
    -->
  <!--</div>-->


  <!--⑤-->
  <div id="video-background"></div>
  <div id="video-overlay"></div>
</body>
</html>
